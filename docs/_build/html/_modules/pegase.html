<!DOCTYPE html>
<html class="writer-html5" lang="fr" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>pegase &mdash; Documentation listem3u V1.3</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/listem3u.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/translations.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Recherche" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            listem3u
              <img src="../_static/listem3u.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Rechercher docs" aria-label="Rechercher docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../listem3u.html">listem3u module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../test_listem3u.html">test_listem3u module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pegase.html">pegase module</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">listem3u</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Code du module</a></li>
      <li class="breadcrumb-item active">pegase</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Code source de pegase</h1><div class="highlight"><pre>
<span></span><span class="ch">#!/usr/bin/env python3</span>
<span class="c1"># -*- encoding: utf-8 -*-</span>
<span class="c1"># pylint: disable=too-many-branches</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">  Created on 14 mars 2023</span>

<span class="sd">  @author: Nicolas Bruschi</span>

<span class="sd">  Calcule l&#39;heure de départ minimale theorique pour effectuer obligation de</span>
<span class="sd">  7h24 de travail effectif d&#39;apres renseignement de 1 ou 3 badgeages de type</span>
<span class="sd">  xxhmm exemple 9:24 ou 09h24 ou 13H56 (le h ou : central accepte la casse</span>
<span class="sd">  min/maj). Pour renseigner une séquence de 3 badgeage copie/colle sur</span>
<span class="sd">  pegaseweb:  09:33 - 12:09 - 12:35</span>

<span class="sd">  [ EN ENTREE ]</span>
<span class="sd">    1 ou 3 arguments de type chaine = xxhmm ou xHmm</span>
<span class="sd">        exemple 9h24 ou 09:24 ou 13H56 (:,h central accepte la casse min/maj)</span>
<span class="sd">        Si un seul arg on appliquera automatiquement une pause midi obligatoire</span>
<span class="sd">        de 45 minutes</span>
<span class="sd">        Si 3 arg la duree entre arg 2 et arg 3 est la duree de la pause</span>
<span class="sd">        meridienne ne pouvant etre inf a 45 minutes.</span>
<span class="sd">  [ EN SORTIE ]</span>
<span class="sd">    0   OK =&gt; Affichage de l&#39;heure du depart calcule ex: DEPART : 17H19</span>
<span class="sd">    1   KO Arguments appel incorrects ou en nombre incorrect.</span>
<span class="sd">        =&gt; Affichage raison pb.</span>

<span class="sd">  [VERSIONS]</span>
<span class="sd">    [2023-03-14] BN V1.0 : Initialisation</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="c1">## Bibliotheques ##</span>

<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">getopt</span>

<span class="c1"># VARIABLES GLOBALES :</span>

<span class="n">FILENAME</span> <span class="o">=</span> <span class="s2">&quot;pegase.py&quot;</span>
<span class="n">VERSION</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;  </span><span class="si">{</span><span class="n">FILENAME</span><span class="si">}</span><span class="s2">: [2023-03-14] BN V1.0</span><span class="se">\n</span><span class="s2">&quot;</span>
<span class="n">USAGE</span> <span class="o">=</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  usage: </span><span class="si">{</span><span class="n">FILENAME</span><span class="si">}</span><span class="s2"> [OPTIONS]</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span>\
<span class="s2">&quot;  OPTIONS:</span><span class="se">\n</span><span class="s2">&quot;</span>
<span class="s2">&quot;  [09:31 - 12h00 - 12H38] 1 ou 3 badgeage(s) OBLIGATOIRE(S)</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span>\
<span class="s2">&quot;  [-h |--help : Demande usage] Optionnel</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span>\
<span class="s2">&quot;  [-v |--version : Demande version] Optionnel</span><span class="se">\n</span><span class="s2">&quot;</span>
<span class="s2">&quot;  Tous les parametres acceptent casse minuscules/majuscules.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">DUREE_JOUR</span> <span class="o">=</span> <span class="mi">444</span>  <span class="c1"># 7h24 convertis en minutes (37h sur 5 j = 7h24 par jour)</span>
<span class="n">DUREE_PAUSE_DEFAUT</span> <span class="o">=</span> <span class="mi">45</span>
<span class="n">SEPARHM</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;H&quot;</span><span class="p">,</span><span class="s2">&quot;:&quot;</span><span class="p">]</span>

<span class="c1">## Fonctions :</span>
<span class="c1">##############</span>

<div class="viewcode-block" id="parametres"><a class="viewcode-back" href="../pegase.html#pegase.parametres">[docs]</a><span class="k">def</span> <span class="nf">parametres</span><span class="p">(</span><span class="n">argv</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;_</span>
<span class="sd">    Gestion des parametres d&#39;appel = help et version</span>

<span class="sd">  [ EN ENTREE ]</span>
<span class="sd">      argv = Les parametres d&#39;appel du script</span>

<span class="sd">  [ EN SORTIE ]</span>
<span class="sd">      0   OK =&gt; Affichage : aide usage ou version</span>
<span class="sd">      1   KO =&gt; arguments appel incorrects ou en nombre incorrect.</span>
<span class="sd">             =&gt; Affichage raison Pb</span>
<span class="sd">      Rien   =&gt; parametres ne contiennent pas de demande d&#39;aide ou de version on</span>
<span class="sd">                sort et continue</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="k">try</span><span class="p">:</span>

    <span class="c1"># pylint: disable=unused-variable</span>
    <span class="n">args</span><span class="p">,</span><span class="n">opts</span> <span class="o">=</span> <span class="n">getopt</span><span class="o">.</span><span class="n">getopt</span><span class="p">(</span> <span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="s2">&quot;hHvV&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;help&quot;</span><span class="p">,</span><span class="s2">&quot;HELP&quot;</span><span class="p">,</span>
                                                   <span class="s2">&quot;version&quot;</span><span class="p">,</span> <span class="s2">&quot;VERSION&quot;</span><span class="p">])</span>
  <span class="k">except</span> <span class="n">getopt</span><span class="o">.</span><span class="n">GetoptError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n\t</span><span class="s1">&gt;&gt;&gt;&gt; ERREUR: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">err</span><span class="p">)</span><span class="si">}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">USAGE</span><span class="si">}</span><span class="s2">&quot;</span> <span class="p">)</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

  <span class="c1"># pylint: disable=unused-variable</span>
  <span class="k">for</span> <span class="n">opt</span> <span class="ow">in</span> <span class="n">opts</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">opt</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;-h&quot;</span><span class="p">,</span> <span class="s2">&quot;-H&quot;</span><span class="p">,</span> <span class="s2">&quot;--help&quot;</span><span class="p">,</span> <span class="s2">&quot;--HELP&quot;</span><span class="p">]:</span>
      <span class="nb">print</span><span class="p">(</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">USAGE</span><span class="si">}</span><span class="s2">&quot;</span> <span class="p">)</span>
      <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">opt</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;-v&quot;</span><span class="p">,</span> <span class="s2">&quot;-V&quot;</span><span class="p">,</span> <span class="s2">&quot;--version&quot;</span><span class="p">,</span> <span class="s2">&quot;--VERSION&quot;</span><span class="p">):</span>
      <span class="nb">print</span><span class="p">(</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">VERSION</span><span class="si">}</span><span class="s2">&quot;</span> <span class="p">)</span>
      <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span></div>

<div class="viewcode-block" id="gestion_parametre"><a class="viewcode-back" href="../pegase.html#pegase.gestion_parametre">[docs]</a><span class="k">def</span> <span class="nf">gestion_parametre</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">    Gestion des parametres d&#39;appel</span>

<span class="sd">    [ EN ENTREE ]</span>
<span class="sd">      *args = Tous les parametres d&#39;appel du script</span>

<span class="sd">    [ EN SORTIE ]</span>
<span class="sd">      minutesici (tableau d&#39;entier) des minutes calculées.</span>

<span class="sd">      ou bien sortie code</span>

<span class="sd">      1   KO arguments appel incorrects ou en nombre incorrect.</span>
<span class="sd">          =&gt; Affichage raison Pb</span>

<span class="sd">  &quot;&quot;&quot;</span>
  <span class="c1"># Variables locales:</span>
  <span class="c1">####################</span>
  <span class="n">minutesici</span> <span class="o">=</span> <span class="p">[]</span>
  <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span> <span class="s1">&#39;</span><span class="se">\n\t</span><span class="s1">&gt;&gt;&gt;&gt; ERREUR: Au moins un badgeage OBLIGATOIRE</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">USAGE</span><span class="si">}</span><span class="s2">&quot;</span> <span class="p">)</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

  <span class="k">for</span> <span class="n">chaine</span> <span class="ow">in</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
    <span class="c1">#print(&#39;debug 1&#39;,args[0],chaine)</span>
    <span class="c1"># controle au moins un param non vide</span>
    <span class="c1"># on passe la chaine en majuscule et on supprime tous les espaces</span>
    <span class="n">ch_trav</span> <span class="o">=</span> <span class="n">chaine</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="n">longueur</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">ch_trav</span><span class="p">)</span>
    <span class="c1">#print (&#39;debug 2&#39;, ch_trav, longueur, chaine)</span>

    <span class="k">if</span> <span class="n">longueur</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
      <span class="nb">print</span><span class="p">(</span> <span class="s2">&quot;</span><span class="se">\n\t</span><span class="s2">Nombre de badgeage insuffisant</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
      <span class="nb">print</span><span class="p">(</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">USAGE</span><span class="si">}</span><span class="s2">&quot;</span> <span class="p">)</span>
      <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">elif</span> <span class="mi">4</span> <span class="o">&lt;=</span> <span class="n">longueur</span> <span class="o">&lt;=</span> <span class="mi">5</span><span class="p">:</span>
      <span class="c1"># la liste non vide est-elle un badgeage ?</span>
      <span class="n">minutesici</span> <span class="o">=</span> <span class="n">test_est_un_badgeage_valide</span><span class="p">(</span> <span class="n">ch_trav</span><span class="p">,</span> <span class="n">minutesici</span><span class="p">)</span>
      <span class="c1">#print(f&#39;debug 6 {minutesici}&#39;)</span>
    <span class="k">elif</span> <span class="n">longueur</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
      <span class="c1"># la liste non vide n&#39;est pas un separateur conforme</span>
      <span class="c1">#print(f&#39;debug 5 {ch_trav}&#39;)</span>
      <span class="nb">print</span><span class="p">(</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Separateur badgeages = </span><span class="si">{</span><span class="n">ch_trav</span><span class="si">}</span><span class="s2"> non conforme</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
      <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="c1">#else:</span>
      <span class="c1"># la liste non vide est un separateur conforme</span>
  <span class="k">return</span> <span class="n">minutesici</span></div>

<div class="viewcode-block" id="test_est_un_badgeage_valide"><a class="viewcode-back" href="../pegase.html#pegase.test_est_un_badgeage_valide">[docs]</a><span class="k">def</span> <span class="nf">test_est_un_badgeage_valide</span><span class="p">(</span><span class="n">ch_trav</span><span class="p">,</span> <span class="n">conversion</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    la liste non vide traitée est-elle un badgeage ?</span>

<span class="sd">  [ EN ENTREE ]</span>
<span class="sd">      ch_trav (chaine) badgeage ?</span>
<span class="sd">      conversion (tableau d&#39;entier) badgeage hh:mm converti en minute</span>

<span class="sd">    [ EN SORTIE ]</span>
<span class="sd">      conversion (tableau d&#39;entier) avec ce badgeage en plus</span>

<span class="sd">      ou bien sortie code</span>

<span class="sd">      1   KO si pas un badgeage valide on sort</span>
<span class="sd">          =&gt; Affichage raison Pb</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="c1"># la chaine de la liste de bonne longueur est-elle un badgeage ?</span>
  <span class="c1"># separateur entre h et minute</span>
  <span class="n">separateur</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
  <span class="c1"># pylint: disable=unused-variable</span>
  <span class="k">for</span> <span class="n">count</span><span class="p">,</span><span class="n">sep</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">SEPARHM</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">sep</span> <span class="ow">in</span> <span class="n">ch_trav</span><span class="p">:</span>
      <span class="n">separateur</span> <span class="o">=</span> <span class="n">sep</span>
  <span class="k">if</span> <span class="n">separateur</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n\t</span><span class="s2">Badgeage = </span><span class="si">{</span><span class="n">ch_trav</span><span class="si">}</span><span class="s2"> non conforme</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">USAGE</span><span class="si">}</span><span class="s2">&quot;</span> <span class="p">)</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
  <span class="k">else</span><span class="p">:</span>
    <span class="n">sheure</span><span class="p">,</span><span class="n">sminute</span> <span class="o">=</span> <span class="n">ch_trav</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">separateur</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
      <span class="n">sheure</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">sheure</span><span class="p">,</span> <span class="n">base</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
      <span class="n">sminute</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">sminute</span><span class="p">,</span> <span class="n">base</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
      <span class="n">conversion</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">conversion_minutes</span><span class="p">(</span><span class="n">sheure</span><span class="p">,</span><span class="n">sminute</span><span class="p">))</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
      <span class="nb">print</span><span class="p">(</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n\t</span><span class="s2">Badgeage = </span><span class="si">{</span><span class="n">ch_trav</span><span class="si">}</span><span class="s2"> non conforme</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
      <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="c1">#print(f&#39;debug 4 {sheure} {sminute}&#39;)</span>
    <span class="k">return</span> <span class="n">conversion</span></div>

<div class="viewcode-block" id="conversion_minutes"><a class="viewcode-back" href="../pegase.html#pegase.conversion_minutes">[docs]</a><span class="k">def</span> <span class="nf">conversion_minutes</span><span class="p">(</span><span class="n">desheures</span><span class="p">,</span><span class="n">desminutes</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;_</span>
<span class="sd">    Conversion heures et minutes passe en appel (de type hh et mm)</span>
<span class="sd">    en un entier = minutes</span>

<span class="sd">    [ EN ENTREE ]</span>
<span class="sd">      desheures (entier) 09 converti en 9</span>
<span class="sd">      desminutes (entier)</span>

<span class="sd">    [ EN SORTIE ]</span>
<span class="sd">      minutes : entier exemple 9*60 + 15 = 555</span>

<span class="sd">  &quot;&quot;&quot;</span>
  <span class="c1"># Variables locales</span>
  <span class="n">int_conv_retour</span><span class="o">=</span><span class="mi">0</span>

  <span class="n">int_conv_retour</span> <span class="o">=</span> <span class="p">(</span><span class="mi">60</span> <span class="o">*</span> <span class="n">desheures</span><span class="p">)</span> <span class="o">+</span> <span class="n">desminutes</span>
  <span class="k">return</span> <span class="n">int_conv_retour</span></div>

<div class="viewcode-block" id="conversion_heures"><a class="viewcode-back" href="../pegase.html#pegase.conversion_heures">[docs]</a><span class="k">def</span> <span class="nf">conversion_heures</span><span class="p">(</span><span class="n">desminutes</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;_</span>
<span class="sd">    Conversion des minutes en xHmm</span>

<span class="sd">    [ EN ENTREE ]</span>
<span class="sd">      desminutes (entier)</span>

<span class="sd">    [ EN SORTIE ]</span>
<span class="sd">      ch_conv_retour (chaine) formatee</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="c1"># Variables locales</span>
  <span class="n">ch_conv_retour</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
  <span class="n">lesheures</span> <span class="o">=</span> <span class="mi">0</span>
  <span class="n">lesminutes</span> <span class="o">=</span> <span class="mi">0</span>

  <span class="n">lesheures</span> <span class="o">=</span> <span class="n">desminutes</span> <span class="o">//</span> <span class="mi">60</span>
  <span class="n">lesminutes</span> <span class="o">=</span> <span class="n">desminutes</span> <span class="o">%</span> <span class="mi">60</span>
  <span class="n">ch_conv_retour</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">lesheures</span><span class="si">}</span><span class="s2">H</span><span class="si">{</span><span class="n">lesminutes</span><span class="si">}</span><span class="s2">&quot;</span>
  <span class="k">return</span> <span class="n">ch_conv_retour</span></div>

<div class="viewcode-block" id="traitement"><a class="viewcode-back" href="../pegase.html#pegase.traitement">[docs]</a><span class="k">def</span> <span class="nf">traitement</span><span class="p">(</span><span class="n">tabminutes</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    affichage finale selon nombre de badgeages recupérés.</span>

<span class="sd">    [ EN ENTREE ]</span>
<span class="sd">      tabminutes (tableau d&#39;entier)</span>

<span class="sd">    [ EN SORTIE ]</span>
<span class="sd">      ch_conv_retour (chaine) formatee</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="n">uncompteur</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">tabminutes</span><span class="p">)</span>
  <span class="k">match</span> <span class="n">uncompteur</span><span class="p">:</span>
    <span class="k">case</span> <span class="mi">3</span><span class="p">:</span>
      <span class="n">pause</span> <span class="o">=</span> <span class="nb">max</span><span class="p">((</span><span class="n">tabminutes</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">tabminutes</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="n">DUREE_PAUSE_DEFAUT</span><span class="p">)</span>
      <span class="n">soir</span> <span class="o">=</span> <span class="n">tabminutes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">pause</span> <span class="o">+</span> <span class="n">DUREE_JOUR</span>
      <span class="n">depart</span> <span class="o">=</span> <span class="n">conversion_heures</span><span class="p">(</span><span class="n">soir</span><span class="p">)</span>
      <span class="nb">print</span><span class="p">(</span> <span class="sa">f</span><span class="s2">&quot;depart : </span><span class="si">{</span><span class="n">depart</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">case</span> <span class="mi">1</span><span class="p">:</span>
      <span class="n">soir</span> <span class="o">=</span> <span class="n">tabminutes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">DUREE_PAUSE_DEFAUT</span> <span class="o">+</span> <span class="n">DUREE_JOUR</span>
      <span class="n">depart</span> <span class="o">=</span> <span class="n">conversion_heures</span><span class="p">(</span><span class="n">soir</span><span class="p">)</span>
      <span class="nb">print</span><span class="p">(</span> <span class="sa">f</span><span class="s2">&quot;depart : </span><span class="si">{</span><span class="n">depart</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">case</span> <span class="k">_</span><span class="p">:</span>
      <span class="nb">print</span><span class="p">(</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n\t</span><span class="s1">&gt;&gt;&gt;&gt; ERREUR: Nombre badgeage </span><span class="si">{</span><span class="n">uncompteur</span><span class="si">}</span><span class="s1"> imprevu</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
      <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span></div>

<span class="c1">### Principal</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
  <span class="n">parametres</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>
  <span class="n">minutes</span> <span class="o">=</span> <span class="n">gestion_parametre</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
  <span class="n">traitement</span><span class="p">(</span><span class="n">minutes</span><span class="p">)</span>
  <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Nicolas Bruschi.</p>
  </div>

  Compilé avec <a href="https://www.sphinx-doc.org/">Sphinx</a> en utilisant un
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">thème</a>
    fourni par <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>